{% extends "base.html" %}
{%block title%} <title>Your Piggybank Portfolio</title> {%endblock%}
{%block scripts%}
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios@0.19.0/dist/axios.min.js"></script>
{%endblock%}

{% block content %}
<div class="container">
    <div class="row pb-5">
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top"> 
            <a class="navbar-brand" href="#">
                    <img src="static/img/piggybank_logo.png" style="width: 50%" alt="Logo">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
             </button>

            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('main.portfolio')}}">Portolio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('main.transaction')}}">Transactions</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('auth.logout')}}">Logout</a>
                    </li>
                 </ul>
            </div>
            
        </nav>
    </div>
    <div class="row pt-5">
        <div class="col">
        <h2>Welcome {{name}}!</h2> 
        </div>
    </div>
    <div class="row pt-5">
        <div class="col-6 border-right">
            <h4>Your current porfolio below: </h4>
        </div>
        <div class="col-6 border-left align-items-center text-center">
            <div id="balance">
                <h4>Current Cash Balance: $[[ balance ]]</h4>
            </div>
            <form class="md-form mx-5 px-5"> 
            <input id="symbol" name="email" class="form-control" required type="text" placeholder="Stock symbol" value=""><br>
            <input id="amount" name="amount" class="form-control" required type="text" placeholder="Quantity" value=""><br>
            <input class="btn btn-success btn-lg" type="submit" value="Purchase">   
            </form>   
        </div>
    </div>
</div>
<script>
var vm1 = new Vue({
    delimiters : ['[[',']]'],
    el: '#balance',
    data: () => {
      return {
         balance: null
      }},
    mounted () {
        axios
        .get('http://localhost:5000/api/balance/me')
        .then(response => (this.balance = response.data))
  }}
  )
</script>

{% endblock %}